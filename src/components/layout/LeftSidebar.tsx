import { useState } from 'react';
import { Link, useNavigate, useLocation } from 'react-router-dom';
import {
  MessageSquare,
  LayoutGrid,
  TrendingUp,
  FileText,
  Settings,
} from 'lucide-react';

/** Navigation items for the paid-media-desktop sidebar. */
const navItems = [
  {
    path: '/campaign-chat',
    label: 'Campaign Chat',
    icon: MessageSquare,
  },
  {
    path: '/campaigns',
    label: 'Campaigns',
    icon: LayoutGrid,
  },
  {
    path: '/optimize',
    label: 'Optimize',
    icon: TrendingUp,
  },
  {
    path: '/reports',
    label: 'Reports',
    icon: FileText,
  },
  {
    path: '/settings',
    label: 'Settings',
    icon: Settings,
  },
];

// ---- Figma SVG icons kept from the source (TD platform chrome) ----

const HomeIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M12 0C12.877 0 13.736 0.291 14.427 0.839L14.434 0.843L14.442 0.851L14.451 0.857L22.618 7.489C23.043 7.831 23.389 8.259 23.63 8.751C23.872 9.246 23.998 9.789 23.998 10.341V20.289C23.998 21.3 23.575 22.252 22.848 22.94C22.123 23.627 21.157 23.998 20.166 23.998H3.833C2.842 23.998 1.875 23.627 1.15 22.94C0.423 22.252 0 21.3 0 20.289V10.341C0 9.789 0.126 9.246 0.368 8.751C0.609 8.259 0.957 7.829 1.382 7.487L9.547 0.857L9.556 0.851L9.564 0.843C10.257 0.292 11.119 0 12 0ZM12 1.199C11.381 1.199 10.781 1.406 10.306 1.787L10.303 1.789L2.137 8.42L2.135 8.422C1.844 8.656 1.608 8.949 1.446 9.279C1.284 9.611 1.199 9.973 1.199 10.341V20.288C1.199 20.959 1.481 21.6 1.977 22.069C2.471 22.538 3.139 22.799 3.833 22.799H8.399V13.499C8.399 12.339 9.339 11.399 10.499 11.399H13.499C14.659 11.399 15.599 12.339 15.599 13.499V22.799H20.166C20.859 22.799 21.527 22.538 22.022 22.069C22.517 21.6 22.799 20.96 22.799 20.289V10.341C22.799 9.973 22.714 9.611 22.552 9.279C22.39 8.948 22.155 8.656 21.864 8.422L21.861 8.42L13.695 1.789L13.692 1.787C13.217 1.406 12.617 1.199 12 1.199ZM10.499 12.599C10.002 12.599 9.599 13.002 9.599 13.499V22.799H14.399V13.499C14.399 13.002 13.996 12.599 13.499 12.599H10.499Z" fill="#666666" />
  </svg>
);

const FoundryIcon = () => (
  <svg width="24" height="24" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M17.441 12.972C17.732 12.476 18.467 12.476 18.759 12.972L18.815 13.086L19.464 14.734L21.114 15.385L21.228 15.441C21.724 15.732 21.724 16.467 21.228 16.759L21.114 16.815L19.464 17.464L18.815 19.113C18.575 19.721 17.753 19.759 17.441 19.228L17.385 19.113L16.735 17.464L15.086 16.815C14.438 16.559 14.438 15.641 15.086 15.385L16.735 14.734L17.385 13.086L17.441 12.972ZM17.628 15.195C17.589 15.293 17.531 15.383 17.456 15.457C17.382 15.532 17.292 15.59 17.194 15.629L17.193 15.628L16 16.099L17.196 16.571C17.269 16.6 17.338 16.641 17.399 16.691L17.457 16.743L17.51 16.802C17.56 16.863 17.6 16.932 17.629 17.006L18.099 18.199L18.572 17.004L18.604 16.933C18.64 16.863 18.687 16.798 18.743 16.742C18.799 16.686 18.864 16.64 18.934 16.604L19.006 16.57L20.199 16.1L19.004 15.628C18.906 15.589 18.817 15.531 18.742 15.456C18.668 15.381 18.609 15.292 18.571 15.193L18.1 13.999L17.628 15.195Z" fill="#666666" />
    <path fillRule="evenodd" clipRule="evenodd" d="M8.292 0.89C8.76 -0.296 10.44 -0.297 10.907 0.889L12.968 6.114C12.978 6.14 12.994 6.166 13.014 6.186C13.034 6.205 13.058 6.221 13.084 6.231L18.31 8.292C19.496 8.76 19.496 10.439 18.31 10.906L18.311 10.907L13.085 12.968C13.059 12.978 13.034 12.994 13.014 13.014C12.994 13.034 12.978 13.058 12.968 13.084L10.907 18.31C10.44 19.496 8.76 19.496 8.292 18.311L6.232 13.085C6.221 13.059 6.205 13.034 6.186 13.014C6.166 12.994 6.142 12.978 6.115 12.968L0.89 10.907C-0.296 10.44 -0.297 8.76 0.889 8.292L6.114 6.231C6.141 6.221 6.166 6.205 6.186 6.186C6.206 6.166 6.221 6.141 6.232 6.115L8.292 0.89ZM9.79 1.329C9.722 1.157 9.478 1.157 9.409 1.329L7.348 6.556C7.277 6.735 7.17 6.899 7.033 7.035C6.897 7.171 6.733 7.278 6.554 7.349L6.553 7.348L1.329 9.409C1.157 9.477 1.157 9.722 1.329 9.79L6.556 11.852C6.735 11.922 6.899 12.03 7.035 12.166C7.171 12.303 7.278 12.466 7.349 12.646L9.409 17.87L9.443 17.927C9.536 18.04 9.731 18.021 9.79 17.87L11.852 12.644C11.923 12.464 12.03 12.3 12.166 12.164C12.303 12.028 12.466 11.921 12.646 11.851L17.87 9.79L17.927 9.757C18.04 9.663 18.021 9.469 17.87 9.409L12.644 7.348C12.464 7.277 12.301 7.17 12.164 7.033C12.028 6.897 11.921 6.733 11.851 6.554L9.79 1.329Z" fill="#666666" />
  </svg>
);

const DataWorkbenchIcon = () => (
  <svg width="24" height="24" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M11.1 0C14.063 0 16.774 0.532 18.768 1.418C19.764 1.861 20.607 2.403 21.209 3.036C21.814 3.672 22.199 4.427 22.199 5.267V16.933C22.199 17.772 21.814 18.527 21.209 19.163C20.607 19.796 19.764 20.339 18.768 20.781C16.774 21.667 14.063 22.199 11.1 22.199C8.137 22.199 5.425 21.667 3.432 20.781C2.436 20.339 1.593 19.796 0.99 19.163C0.385 18.527 0 17.772 0 16.933V5.267C0 4.427 0.385 3.672 0.99 3.036C1.593 2.403 2.436 1.861 3.432 1.418C5.425 0.532 8.137 0 11.1 0ZM21 13.535C20.418 14.08 19.654 14.555 18.768 14.948C16.774 15.834 14.063 16.366 11.1 16.366C8.137 16.366 5.425 15.834 3.432 14.948C2.546 14.555 1.781 14.08 1.199 13.535V16.933C1.199 17.382 1.402 17.855 1.859 18.336C2.32 18.82 3.015 19.283 3.919 19.685C5.726 20.488 8.264 21 11.1 21C13.935 21 16.473 20.488 18.28 19.685C19.185 19.283 19.879 18.82 20.34 18.336C20.797 17.855 21 17.382 21 16.933V13.535ZM21 7.701C20.418 8.247 19.654 8.721 18.768 9.115C16.774 10.001 14.063 10.533 11.1 10.533C8.137 10.533 5.425 10.001 3.432 9.115C2.545 8.721 1.781 8.247 1.199 7.701V11.1C1.199 11.549 1.402 12.022 1.859 12.503C2.32 12.987 3.015 13.45 3.919 13.852C5.726 14.655 8.264 15.166 11.1 15.166C13.935 15.166 16.473 14.655 18.28 13.852C19.185 13.45 19.879 12.987 20.34 12.503C20.797 12.022 21 11.549 21 11.1V7.701ZM11.1 1.199C8.264 1.199 5.726 1.712 3.919 2.515C3.015 2.916 2.32 3.379 1.859 3.863C1.402 4.344 1.199 4.817 1.199 5.267C1.199 5.716 1.402 6.189 1.859 6.67C2.32 7.154 3.015 7.617 3.919 8.019C5.726 8.821 8.264 9.333 11.1 9.333C13.935 9.333 16.473 8.821 18.28 8.019C19.185 7.617 19.879 7.154 20.34 6.67C20.797 6.189 21 5.716 21 5.267C21 4.817 20.797 4.344 20.34 3.863C19.879 3.379 19.185 2.916 18.28 2.515C16.473 1.712 13.935 1.199 11.1 1.199Z" fill="#666666" />
  </svg>
);

const EngageIcon = () => (
  <svg width="24" height="24" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M1.296 0C1.524 -0.001 1.748 0.058 1.945 0.171L8.926 4.161H16.933C18.329 4.161 19.67 4.716 20.657 5.704C21.645 6.692 22.199 8.031 22.199 9.428C22.199 10.825 21.645 12.165 20.657 13.152C19.794 14.016 18.662 14.547 17.458 14.668L16.644 20.363L16.643 20.369C16.527 21.127 16.116 21.808 15.501 22.265C14.885 22.722 14.114 22.917 13.355 22.809C12.596 22.7 11.91 22.297 11.447 21.686C10.984 21.075 10.781 20.306 10.882 19.546L10.883 19.54L11.574 14.694H8.926L1.945 18.684C1.748 18.797 1.524 18.856 1.296 18.856C1.069 18.855 0.845 18.795 0.648 18.681C0.451 18.567 0.288 18.402 0.174 18.205C0.089 18.057 0.033 17.895 0.011 17.727L0 17.557V1.3C0 1.072 0.059 0.849 0.173 0.651C0.287 0.454 0.45 0.289 0.647 0.175C0.844 0.061 1.068 0.001 1.296 0ZM12.787 14.694L12.07 19.71C12.013 20.154 12.133 20.604 12.403 20.961C12.675 21.32 13.079 21.557 13.524 21.621C13.97 21.685 14.423 21.57 14.785 21.302C15.102 21.067 15.326 20.73 15.423 20.352L15.457 20.188L16.241 14.694H12.787ZM1.249 1.213C1.234 1.222 1.222 1.235 1.213 1.25L1.199 1.3V17.557C1.199 17.574 1.204 17.591 1.213 17.606C1.222 17.621 1.234 17.633 1.249 17.642C1.264 17.65 1.282 17.655 1.3 17.655C1.317 17.655 1.335 17.651 1.35 17.643L8.166 13.747V5.108L1.35 1.213L1.299 1.199C1.281 1.199 1.264 1.204 1.249 1.213ZM9.366 5.361V13.495H16.933L17.135 13.489C18.14 13.439 19.094 13.019 19.809 12.304C20.571 11.541 21 10.506 21 9.428C21 8.349 20.571 7.315 19.809 6.553C19.046 5.79 18.011 5.361 16.933 5.361H9.366Z" fill="#666666" />
  </svg>
);

const AudienceIcon = () => (
  <svg width="24" height="24" viewBox="0 0 26 19" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M9.464 0C12.205 0 14.428 2.222 14.428 4.963C14.428 6.814 13.412 8.427 11.909 9.28C16.096 10.314 19.2 14.094 19.2 18.6C19.2 18.931 18.932 19.199 18.601 19.199C18.269 19.199 18.001 18.931 18.001 18.6C18.001 13.961 14.24 10.199 9.601 10.199C4.961 10.199 1.2 13.96 1.2 18.6C1.2 18.931 0.932 19.199 0.601 19.199C0.269 19.199 0 18.931 0 18.6C0 14.162 3.012 10.428 7.103 9.329C5.553 8.489 4.501 6.849 4.501 4.963C4.501 2.222 6.723 0 9.464 0ZM9.464 1.199C7.386 1.199 5.7 2.885 5.7 4.963C5.7 7.041 7.385 8.726 9.464 8.727C11.542 8.726 13.228 7.041 13.228 4.963C13.227 2.885 11.542 1.199 9.464 1.199Z" fill="#666666" />
    <path d="M18.883 4.5C21.022 4.5 22.756 6.233 22.756 8.372C22.756 9.692 22.094 10.856 21.086 11.556C24.121 12.459 26.335 15.27 26.335 18.6C26.335 18.931 26.067 19.199 25.735 19.199C25.404 19.199 25.136 18.931 25.136 18.6C25.136 15.203 22.382 12.449 18.985 12.449C18.709 12.449 18.479 12.263 18.409 12.009C18.332 11.908 18.283 11.783 18.283 11.646C18.283 11.314 18.551 11.045 18.883 11.045C20.359 11.045 21.556 9.848 21.556 8.372C21.556 6.896 20.359 5.699 18.883 5.699C18.392 5.699 17.933 5.832 17.539 6.062C17.253 6.228 16.885 6.132 16.718 5.846C16.551 5.56 16.648 5.192 16.934 5.025C17.507 4.691 18.174 4.5 18.883 4.5Z" fill="#666666" />
  </svg>
);

const JobsIcon = () => (
  <svg width="24" height="24" viewBox="0 0 22 18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M21.1 10.5C21.707 10.5 22.199 10.992 22.199 11.6V16.6C22.199 17.207 21.707 17.699 21.1 17.699H1.1C0.492 17.699 0 17.207 0 16.6V11.6C0 10.992 0.492 10.5 1.1 10.5H21.1ZM1.199 16.5H6V11.699H1.199V16.5ZM7.199 16.5H21V11.699H7.199V16.5Z" fill="#666666" />
    <path fillRule="evenodd" clipRule="evenodd" d="M21.1 0C21.707 0 22.199 0.492 22.199 1.1V6.1C22.199 6.707 21.707 7.199 21.1 7.199H1.1C0.492 7.199 0 6.707 0 6.1V1.1C0 0.492 0.492 0 1.1 0H21.1ZM16.199 6H21V1.199H16.199V6ZM1.199 6H15V1.199H1.199V6Z" fill="#666666" />
  </svg>
);

const P13nIcon = () => (
  <svg width="24" height="24" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M11.105 0C11.436 0 11.704 0.268 11.704 0.6V1.938C16.291 2.236 19.956 5.904 20.252 10.491H21.598C21.929 10.491 22.197 10.76 22.197 11.091C22.197 11.422 21.929 11.69 21.598 11.69H20.252C19.956 16.277 16.29 19.943 11.704 20.242V21.599C11.704 21.93 11.436 22.198 11.105 22.198C10.773 22.198 10.505 21.93 10.505 21.599V20.243C5.914 19.95 2.243 16.281 1.946 11.69H0.6C0.268 11.69 0 11.422 0 11.091C0 10.759 0.268 10.491 0.6 10.491H1.946C2.242 5.9 5.913 2.23 10.505 1.937V0.6C10.505 0.268 10.773 0 11.105 0ZM11.704 7.949C11.704 8.281 11.436 8.549 11.105 8.549C10.773 8.549 10.505 8.281 10.505 7.949V3.14C6.576 3.429 3.44 6.563 3.148 10.491H7.949C8.281 10.491 8.549 10.76 8.549 11.091C8.549 11.422 8.281 11.69 7.949 11.69H3.149C3.442 15.618 6.577 18.75 10.505 19.039V14.249C10.505 13.918 10.773 13.649 11.105 13.649C11.436 13.649 11.704 13.918 11.704 14.249V19.039C15.627 18.744 18.756 15.614 19.048 11.69H14.248C13.917 11.69 13.648 11.422 13.648 11.091C13.648 10.759 13.917 10.491 14.248 10.491H19.049C18.757 6.567 15.628 3.434 11.704 3.14V7.949Z" fill="#666666" />
  </svg>
);

const WorkspaceIcon = () => (
  <svg width="24" height="24" viewBox="0 0 23 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17 22.78C17.332 22.78 17.6 23.053 17.6 23.39C17.6 23.727 17.332 24 17 24H5C4.669 24 4.4 23.727 4.4 23.39C4.4 23.053 4.669 22.78 5 22.78H17Z" fill="#666666" />
    <path d="M12.05 3.277C11.518 3.491 11.123 3.847 10.865 4.271H2C1.558 4.271 1.2 4.636 1.2 5.085V18.305C1.2 18.755 1.558 19.119 2 19.119H20C20.442 19.119 20.8 18.755 20.8 18.305V8.77L22 8.29V18.305C22 19.359 21.213 20.224 20.204 20.328L20 20.339H2L1.796 20.328C0.854 20.231 0.106 19.471 0.011 18.513L0 18.305V5.085C0 3.962 0.895 3.051 2 3.051H12.614L12.05 3.277Z" fill="#666666" />
    <path fillRule="evenodd" clipRule="evenodd" d="M16.687 0.467C17.072 -0.2 18.085 -0.152 18.381 0.61L19.518 3.541L22.401 4.698C23.2 5.018 23.2 6.168 22.401 6.489L19.518 7.645L18.381 10.577C18.066 11.39 16.935 11.39 16.619 10.577L15.482 7.645L12.6 6.489C11.8 6.168 11.8 5.018 12.6 4.698L15.482 3.541L16.619 0.61L16.687 0.467ZM16.405 3.936C16.357 4.059 16.285 4.171 16.193 4.265C16.124 4.335 16.044 4.393 15.957 4.438L15.869 4.479L13.09 5.592L15.87 6.708L15.959 6.749C16.017 6.78 16.071 6.816 16.121 6.858L16.194 6.923L16.258 6.998C16.319 7.074 16.369 7.16 16.405 7.252L17.499 10.077L18.596 7.251L18.637 7.16C18.682 7.073 18.739 6.992 18.808 6.922C18.899 6.829 19.01 6.756 19.131 6.708L21.909 5.593L19.13 4.479C19.009 4.43 18.899 4.357 18.807 4.264C18.738 4.193 18.681 4.112 18.636 4.024L18.596 3.935L17.5 1.108L16.405 3.936Z" fill="#666666" />
  </svg>
);

const SuperAgentIcon = () => (
  <svg width="24" height="24" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M13.053 3.544C13.391 2.685 14.607 2.686 14.946 3.544L15.985 6.18L18.622 7.22L18.773 7.293C19.431 7.679 19.431 8.654 18.773 9.04L18.622 9.113L15.985 10.152L14.946 12.789C14.629 13.594 13.54 13.645 13.126 12.94L13.053 12.789L12.013 10.152L9.377 9.113C8.519 8.774 8.518 7.558 9.377 7.22L12.013 6.18L13.053 3.544ZM13.101 6.694C13.049 6.824 12.972 6.942 12.873 7.041C12.774 7.14 12.656 7.218 12.525 7.269L12.524 7.268L10.247 8.166L12.527 9.065L12.623 9.109C12.715 9.157 12.8 9.219 12.874 9.293C12.973 9.392 13.051 9.511 13.102 9.641L13.999 11.918L14.898 9.639C14.95 9.509 15.027 9.391 15.126 9.292C15.225 9.194 15.343 9.116 15.473 9.065L17.75 8.166L15.472 7.268C15.342 7.216 15.224 7.139 15.125 7.04C15.027 6.941 14.949 6.823 14.898 6.693L13.999 4.415L13.101 6.694Z" fill="#666666" />
    <path fillRule="evenodd" clipRule="evenodd" d="M22.736 0C23.023 0 23.308 0.06 23.573 0.175C23.838 0.29 24.079 0.458 24.282 0.671L27.605 4.154C27.858 4.42 28 4.781 28 5.156L27.993 5.297C27.962 5.621 27.826 5.927 27.605 6.159L14.956 19.418C14.702 19.684 14.359 19.833 14 19.833L13.866 19.826C13.601 19.799 13.349 19.69 13.143 19.513L13.044 19.418L0.396 6.159C0.142 5.893 0 5.532 0 5.156C0 4.781 0.142 4.42 0.396 4.154L3.718 0.671C3.87 0.512 4.043 0.376 4.232 0.271L4.427 0.175C4.626 0.088 4.835 0.033 5.049 0.011L5.264 0H22.736ZM5.264 1.2C5.142 1.2 5.02 1.225 4.904 1.275C4.789 1.326 4.68 1.401 4.586 1.499L1.265 4.982C1.23 5.019 1.2 5.081 1.2 5.156C1.2 5.232 1.229 5.294 1.265 5.331L13.912 18.59L13.96 18.625C13.975 18.632 13.989 18.634 14 18.634C14.022 18.634 14.055 18.625 14.088 18.59L26.735 5.331C26.771 5.294 26.8 5.232 26.8 5.156C26.8 5.081 26.771 5.019 26.735 4.982L23.414 1.499C23.32 1.401 23.211 1.326 23.096 1.275C22.98 1.225 22.858 1.2 22.736 1.2H5.264Z" fill="#666666" />
  </svg>
);

const ProfileIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="8" r="4" stroke="#666666" strokeWidth="1.2" fill="none" />
    <path d="M6 21V19C6 17.9391 6.42143 16.9217 7.17157 16.1716C7.92172 15.4214 8.93913 15 10 15H14C15.0609 15 16.0783 15.4214 16.8284 16.1716C17.5786 16.9217 18 17.9391 18 19V21" stroke="#666666" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
  </svg>
);

// ---- TD platform chrome icons (decorative, non-navigable in this prototype) ----

const platformChromeItems = [
  { label: 'Home', icon: <HomeIcon /> },
  { label: 'Foundry', icon: <FoundryIcon /> },
  { label: 'Data Workbench', icon: <DataWorkbenchIcon /> },
  { label: 'Engage', icon: <EngageIcon /> },
  { label: 'Audience', icon: <AudienceIcon /> },
  { label: 'Jobs', icon: <JobsIcon /> },
  { label: 'Personalization', icon: <P13nIcon /> },
  { label: 'Workspace', icon: <WorkspaceIcon /> },
  { label: 'Super Agent', icon: <SuperAgentIcon /> },
];

// ---- Sub-components ----

interface NavIconProps {
  children: React.ReactNode;
  onClick?: () => void;
  title?: string;
  isActive?: boolean;
}

const NavIcon: React.FC<NavIconProps> = ({ children, onClick, title, isActive = false }) => {
  return (
    <button
      onClick={onClick}
      title={title}
      className={`w-16 h-12 flex items-center justify-center cursor-pointer transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-td-blue focus:ring-offset-2 ${
        isActive ? 'bg-gray-100' : 'hover:bg-gray-50'
      }`}
    >
      <div className="w-10 h-10 flex items-center justify-center">
        {children}
      </div>
    </button>
  );
};

// ---- Main component ----

const LeftSidebar = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const [showSettingsMenu, setShowSettingsMenu] = useState(false);

  const handleHomeClick = () => {
    navigate('/campaign-chat');
  };

  const handleSettingsClick = () => {
    navigate('/settings');
    setShowSettingsMenu(false);
  };

  return (
    <div className="w-16 h-screen bg-white flex flex-col items-center justify-between fixed left-0 top-0 z-[1000] border-r border-gray-100">
      {/* Top section: logo + TD platform chrome nav */}
      <div className="flex flex-col items-center w-full">
        {/* TD Logo */}
        <button
          onClick={handleHomeClick}
          className="w-16 h-16 flex items-center justify-center cursor-pointer transition-colors duration-200 hover:bg-gray-50 focus:outline-none"
        >
          <img
            src="/td-icon.svg"
            alt="TD Logo"
            className="w-10 h-10 object-contain"
          />
        </button>

        {/* TD Platform Chrome Icons (decorative, non-navigable) */}
        {platformChromeItems.map((item) => (
          <NavIcon key={item.label} title={item.label}>
            {item.icon}
          </NavIcon>
        ))}
      </div>

      {/* Bottom section: settings dropdown + profile */}
      <div className="flex flex-col items-center pb-6 w-full relative">
        {/* Settings with dropdown */}
        <div className="relative">
          <NavIcon
            onClick={() => setShowSettingsMenu(!showSettingsMenu)}
            title="Settings"
          >
            <Settings className="w-5 h-5 text-gray-500" />
          </NavIcon>

          {showSettingsMenu && (
            <>
              {/* Backdrop */}
              <div
                onClick={() => setShowSettingsMenu(false)}
                className="fixed inset-0 z-[999]"
              />

              {/* Dropdown menu */}
              <div className="absolute left-16 bottom-0 bg-white border border-gray-200 rounded-xl shadow-lg min-w-[220px] overflow-hidden z-[1000]">
                {/* Header */}
                <div className="px-4 py-3 border-b border-gray-100">
                  <span className="text-[11px] font-semibold text-gray-400 uppercase tracking-wide">
                    Navigate
                  </span>
                </div>

                {/* Nav items in dropdown */}
                {navItems.map((item) => {
                  const Icon = item.icon;
                  const isActive =
                    location.pathname === item.path ||
                    (item.path !== '/campaign-chat' && location.pathname.startsWith(item.path));

                  return (
                    <Link
                      key={item.path}
                      to={item.path}
                      onClick={() => setShowSettingsMenu(false)}
                      className={`flex items-center gap-3 px-4 py-3.5 transition-colors duration-200 ${
                        isActive
                          ? 'bg-gray-50 text-gray-900'
                          : 'text-gray-700 hover:bg-gray-50'
                      }`}
                    >
                      <Icon className="w-4 h-4 text-gray-500 flex-shrink-0" />
                      <span className="text-sm font-medium">{item.label}</span>
                    </Link>
                  );
                })}
              </div>
            </>
          )}
        </div>

        {/* Profile avatar */}
        <NavIcon title="Profile">
          <ProfileIcon />
        </NavIcon>
      </div>
    </div>
  );
};

export default LeftSidebar;
